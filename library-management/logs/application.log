2025-05-13 08:45:48 [main] INFO  c.b.l.LibraryManagementApplication - Starting LibraryManagementApplication using Java 21 with PID 14257 (/Users/barisdalyan/Developer/web-projects/getir-bootcamp-final-case/library-management/target/classes started by barisdalyan in /Users/barisdalyan/Developer/web-projects/getir-bootcamp-final-case/library-management)
2025-05-13 08:45:48 [main] INFO  c.b.l.LibraryManagementApplication - The following 1 profile is active: "development"
2025-05-13 08:45:48 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-05-13 08:45:48 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 62 ms. Found 3 JPA repository interfaces.
2025-05-13 08:45:48 [main] INFO  c.b.l.config.EnvConfig - Loading .env file for development profile: /Users/barisdalyan/Developer/web-projects/getir-bootcamp-final-case/library-management/../.env
2025-05-13 08:45:48 [main] INFO  c.b.l.config.EnvConfig - Successfully loaded 13 properties from .env file
2025-05-13 08:45:48 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-05-13 08:45:48 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-05-13 08:45:48 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-05-13 08:45:48 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.40]
2025-05-13 08:45:48 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-05-13 08:45:48 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 713 ms
2025-05-13 08:45:49 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-05-13 08:45:49 [main] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:librarydb user=SA
2025-05-13 08:45:49 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-05-13 08:45:49 [main] INFO  org.flywaydb.core.FlywayExecutor - Database: jdbc:h2:mem:librarydb (H2 2.3)
2025-05-13 08:45:49 [main] WARN  o.f.c.i.database.base.Database - Flyway upgrade recommended: H2 2.3.232 is newer than this version of Flyway and support has not been tested. The latest supported version of H2 is 2.2.224.
2025-05-13 08:45:49 [main] INFO  o.f.c.i.s.JdbcTableSchemaHistory - Schema history table "PUBLIC"."flyway_schema_history" does not exist yet
2025-05-13 08:45:49 [main] INFO  o.f.core.internal.command.DbValidate - Successfully validated 1 migration (execution time 00:00.004s)
2025-05-13 08:45:49 [main] INFO  o.f.c.i.s.JdbcTableSchemaHistory - Creating Schema History table "PUBLIC"."flyway_schema_history" ...
2025-05-13 08:45:49 [main] INFO  o.f.core.internal.command.DbMigrate - Current version of schema "PUBLIC": << Empty Schema >>
2025-05-13 08:45:49 [main] INFO  o.f.core.internal.command.DbMigrate - Migrating schema "PUBLIC" to version "1 - init schema"
2025-05-13 08:45:49 [main] INFO  o.f.core.internal.command.DbMigrate - Successfully applied 1 migration to schema "PUBLIC", now at version v1 (execution time 00:00.003s)
2025-05-13 08:45:49 [main] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-05-13 08:45:49 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-05-13 08:45:49 [main] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-05-13 08:45:50 [main] INFO  o.s.s.c.a.a.c.InitializeAuthenticationProviderBeanManagerConfigurer$InitializeAuthenticationProviderManagerConfigurer - Global AuthenticationManager configured with AuthenticationProvider bean with name authenticationProvider
2025-05-13 08:45:50 [main] WARN  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with an AuthenticationProvider bean. UserDetailsService beans will not be used by Spring Security for automatically configuring username/password login. Consider removing the AuthenticationProvider bean. Alternatively, consider using the UserDetailsService in a manually instantiated DaoAuthenticationProvider. If the current configuration is intentional, to turn off this warning, increase the logging level of 'org.springframework.security.config.annotation.authentication.configuration.InitializeUserDetailsBeanManagerConfigurer' to ERROR
2025-05-13 08:45:50 [main] INFO  c.b.l.s.i.BookAvailabilityServiceImpl - BookAvailabilityService initialized
2025-05-13 08:45:50 [main] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-05-13 08:45:50 [main] INFO  o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:librarydb'
2025-05-13 08:45:51 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-05-13 08:45:51 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-05-13 08:45:51 [main] INFO  c.b.l.LibraryManagementApplication - Started LibraryManagementApplication in 3.034 seconds (process running for 3.171)
2025-05-13 08:45:51 [main] INFO  c.b.l.bootstrap.DataInitializer - Starting data initialization...
2025-05-13 08:45:51 [main] INFO  c.b.l.bootstrap.DataInitializer - Admin user created: admin@library.com
2025-05-13 08:45:51 [main] INFO  c.b.l.bootstrap.DataInitializer - Created 3 sample patrons
2025-05-13 08:45:51 [main] INFO  c.b.l.bootstrap.DataInitializer - Created 5 sample books
2025-05-13 08:45:51 [main] INFO  c.b.l.bootstrap.DataInitializer - Created 5 sample borrow records
2025-05-13 08:45:51 [main] INFO  c.b.l.bootstrap.DataInitializer - Sample data created successfully
2025-05-13 08:45:51 [main] INFO  c.b.l.LibraryManagementApplication - Library Management System started successfully
2025-05-13 08:50:20 [main] INFO  c.b.l.LibraryManagementApplication - Starting LibraryManagementApplication using Java 21 with PID 14370 (/Users/barisdalyan/Developer/web-projects/getir-bootcamp-final-case/library-management/target/classes started by barisdalyan in /Users/barisdalyan/Developer/web-projects/getir-bootcamp-final-case/library-management)
2025-05-13 08:50:20 [main] INFO  c.b.l.LibraryManagementApplication - The following 1 profile is active: "development"
2025-05-13 08:50:20 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-05-13 08:50:20 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 66 ms. Found 3 JPA repository interfaces.
2025-05-13 08:50:21 [main] INFO  c.b.l.config.EnvConfig - Loading .env file for development profile: /Users/barisdalyan/Developer/web-projects/getir-bootcamp-final-case/library-management/../.env
2025-05-13 08:50:21 [main] INFO  c.b.l.config.EnvConfig - Successfully loaded 13 properties from .env file
2025-05-13 08:50:21 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-05-13 08:50:21 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-05-13 08:50:21 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-05-13 08:50:21 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.40]
2025-05-13 08:50:21 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-05-13 08:50:21 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 839 ms
2025-05-13 08:50:21 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-05-13 08:50:21 [main] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:librarydb user=SA
2025-05-13 08:50:21 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-05-13 08:50:21 [main] INFO  org.flywaydb.core.FlywayExecutor - Database: jdbc:h2:mem:librarydb (H2 2.3)
2025-05-13 08:50:21 [main] WARN  o.f.c.i.database.base.Database - Flyway upgrade recommended: H2 2.3.232 is newer than this version of Flyway and support has not been tested. The latest supported version of H2 is 2.2.224.
2025-05-13 08:50:21 [main] INFO  o.f.c.i.s.JdbcTableSchemaHistory - Schema history table "PUBLIC"."flyway_schema_history" does not exist yet
2025-05-13 08:50:21 [main] INFO  o.f.core.internal.command.DbValidate - Successfully validated 1 migration (execution time 00:00.005s)
2025-05-13 08:50:21 [main] INFO  o.f.c.i.s.JdbcTableSchemaHistory - Creating Schema History table "PUBLIC"."flyway_schema_history" ...
2025-05-13 08:50:21 [main] INFO  o.f.core.internal.command.DbMigrate - Current version of schema "PUBLIC": << Empty Schema >>
2025-05-13 08:50:21 [main] INFO  o.f.core.internal.command.DbMigrate - Migrating schema "PUBLIC" to version "1 - init schema"
2025-05-13 08:50:21 [main] INFO  o.f.core.internal.command.DbMigrate - Successfully applied 1 migration to schema "PUBLIC", now at version v1 (execution time 00:00.004s)
2025-05-13 08:50:21 [main] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-05-13 08:50:21 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-05-13 08:50:22 [main] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-05-13 08:50:22 [main] INFO  o.s.s.c.a.a.c.InitializeAuthenticationProviderBeanManagerConfigurer$InitializeAuthenticationProviderManagerConfigurer - Global AuthenticationManager configured with AuthenticationProvider bean with name authenticationProvider
2025-05-13 08:50:22 [main] WARN  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with an AuthenticationProvider bean. UserDetailsService beans will not be used by Spring Security for automatically configuring username/password login. Consider removing the AuthenticationProvider bean. Alternatively, consider using the UserDetailsService in a manually instantiated DaoAuthenticationProvider. If the current configuration is intentional, to turn off this warning, increase the logging level of 'org.springframework.security.config.annotation.authentication.configuration.InitializeUserDetailsBeanManagerConfigurer' to ERROR
2025-05-13 08:50:22 [main] INFO  c.b.l.s.i.BookAvailabilityServiceImpl - BookAvailabilityService initialized
2025-05-13 08:50:22 [main] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-05-13 08:50:23 [main] INFO  o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:librarydb'
2025-05-13 08:50:23 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-05-13 08:50:23 [main] WARN  o.s.b.w.s.c.AnnotationConfigServletWebServerApplicationContext - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.context.ApplicationContextException: Failed to start bean 'webServerStartStop'
2025-05-13 08:50:23 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-05-13 08:50:23 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-05-13 08:50:23 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-05-13 08:50:23 [main] INFO  o.s.b.a.l.ConditionEvaluationReportLogger - 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2025-05-13 08:50:23 [main] ERROR o.s.b.d.LoggingFailureAnalysisReporter - 

***************************
APPLICATION FAILED TO START
***************************

Description:

Web server failed to start. Port 8080 was already in use.

Action:

Identify and stop the process that's listening on port 8080 or configure this application to listen on another port.

2025-05-13 08:51:47 [main] INFO  c.b.l.LibraryManagementApplication - Starting LibraryManagementApplication using Java 21 with PID 14472 (/Users/barisdalyan/Developer/web-projects/getir-bootcamp-final-case/library-management/target/classes started by barisdalyan in /Users/barisdalyan/Developer/web-projects/getir-bootcamp-final-case/library-management)
2025-05-13 08:51:47 [main] INFO  c.b.l.LibraryManagementApplication - The following 1 profile is active: "development"
2025-05-13 08:51:47 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-05-13 08:51:47 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 55 ms. Found 3 JPA repository interfaces.
2025-05-13 08:51:47 [main] INFO  c.b.l.config.EnvConfig - Loading .env file for development profile: /Users/barisdalyan/Developer/web-projects/getir-bootcamp-final-case/library-management/../.env
2025-05-13 08:51:47 [main] INFO  c.b.l.config.EnvConfig - Successfully loaded 13 properties from .env file
2025-05-13 08:51:47 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-05-13 08:51:47 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-05-13 08:51:47 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-05-13 08:51:47 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.40]
2025-05-13 08:51:47 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-05-13 08:51:47 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 608 ms
2025-05-13 08:51:47 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-05-13 08:51:48 [main] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:librarydb user=SA
2025-05-13 08:51:48 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-05-13 08:51:48 [main] INFO  org.flywaydb.core.FlywayExecutor - Database: jdbc:h2:mem:librarydb (H2 2.3)
2025-05-13 08:51:48 [main] WARN  o.f.c.i.database.base.Database - Flyway upgrade recommended: H2 2.3.232 is newer than this version of Flyway and support has not been tested. The latest supported version of H2 is 2.2.224.
2025-05-13 08:51:48 [main] INFO  o.f.c.i.s.JdbcTableSchemaHistory - Schema history table "PUBLIC"."flyway_schema_history" does not exist yet
2025-05-13 08:51:48 [main] INFO  o.f.core.internal.command.DbValidate - Successfully validated 1 migration (execution time 00:00.004s)
2025-05-13 08:51:48 [main] INFO  o.f.c.i.s.JdbcTableSchemaHistory - Creating Schema History table "PUBLIC"."flyway_schema_history" ...
2025-05-13 08:51:48 [main] INFO  o.f.core.internal.command.DbMigrate - Current version of schema "PUBLIC": << Empty Schema >>
2025-05-13 08:51:48 [main] INFO  o.f.core.internal.command.DbMigrate - Migrating schema "PUBLIC" to version "1 - init schema"
2025-05-13 08:51:48 [main] INFO  o.f.core.internal.command.DbMigrate - Successfully applied 1 migration to schema "PUBLIC", now at version v1 (execution time 00:00.004s)
2025-05-13 08:51:48 [main] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-05-13 08:51:48 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-05-13 08:51:48 [main] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-05-13 08:51:49 [main] INFO  o.s.s.c.a.a.c.InitializeAuthenticationProviderBeanManagerConfigurer$InitializeAuthenticationProviderManagerConfigurer - Global AuthenticationManager configured with AuthenticationProvider bean with name authenticationProvider
2025-05-13 08:51:49 [main] WARN  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with an AuthenticationProvider bean. UserDetailsService beans will not be used by Spring Security for automatically configuring username/password login. Consider removing the AuthenticationProvider bean. Alternatively, consider using the UserDetailsService in a manually instantiated DaoAuthenticationProvider. If the current configuration is intentional, to turn off this warning, increase the logging level of 'org.springframework.security.config.annotation.authentication.configuration.InitializeUserDetailsBeanManagerConfigurer' to ERROR
2025-05-13 08:51:49 [main] INFO  c.b.l.s.i.BookAvailabilityServiceImpl - BookAvailabilityService initialized
2025-05-13 08:51:49 [main] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-05-13 08:51:49 [main] INFO  o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:librarydb'
2025-05-13 08:51:49 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-05-13 08:51:49 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-05-13 08:51:49 [main] INFO  c.b.l.LibraryManagementApplication - Started LibraryManagementApplication in 2.881 seconds (process running for 3.138)
2025-05-13 08:51:49 [main] INFO  c.b.l.bootstrap.DataInitializer - Starting data initialization...
2025-05-13 08:51:50 [main] INFO  c.b.l.bootstrap.DataInitializer - Admin user created: admin@library.com
2025-05-13 08:51:50 [main] INFO  c.b.l.bootstrap.DataInitializer - Created 3 sample patrons
2025-05-13 08:51:50 [main] INFO  c.b.l.bootstrap.DataInitializer - Created 5 sample books
2025-05-13 08:51:50 [main] INFO  c.b.l.bootstrap.DataInitializer - Created 5 sample borrow records
2025-05-13 08:51:50 [main] INFO  c.b.l.bootstrap.DataInitializer - Sample data created successfully
2025-05-13 08:51:50 [main] INFO  c.b.l.LibraryManagementApplication - Library Management System started successfully
2025-05-13 08:52:03 [http-nio-8080-exec-2] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-05-13 08:52:03 [http-nio-8080-exec-2] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-05-13 08:52:03 [http-nio-8080-exec-2] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 1 ms
2025-05-13 08:52:03 [http-nio-8080-exec-2] INFO  c.b.l.controller.AuthController - Received login request for email: admin@library.com
2025-05-13 08:52:04 [http-nio-8080-exec-2] INFO  c.b.l.service.impl.AuthServiceImpl - User logged in successfully: admin@library.com
2025-05-13 08:52:41 [http-nio-8080-exec-3] INFO  c.b.l.controller.AuthController - Received login request for email: admin@library.com
2025-05-13 08:52:41 [http-nio-8080-exec-3] INFO  c.b.l.service.impl.AuthServiceImpl - User logged in successfully: admin@library.com
2025-05-13 08:52:59 [http-nio-8080-exec-5] INFO  c.b.l.controller.AuthController - Received login request for email: admin@library.com
2025-05-13 08:52:59 [http-nio-8080-exec-5] INFO  c.b.l.service.impl.AuthServiceImpl - User logged in successfully: admin@library.com
2025-05-13 08:54:56 [SpringApplicationShutdownHook] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-05-13 08:54:56 [tomcat-shutdown] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-05-13 08:54:56 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-05-13 08:54:56 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-05-13 08:54:56 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-05-13 09:07:12 [main] INFO  c.b.l.LibraryManagementApplication - Starting LibraryManagementApplication using Java 21 with PID 15139 (/Users/barisdalyan/Developer/web-projects/getir-bootcamp-final-case/library-management/target/classes started by barisdalyan in /Users/barisdalyan/Developer/web-projects/getir-bootcamp-final-case/library-management)
2025-05-13 09:07:12 [main] INFO  c.b.l.LibraryManagementApplication - The following 1 profile is active: "development"
2025-05-13 09:07:13 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-05-13 09:07:13 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 60 ms. Found 3 JPA repository interfaces.
2025-05-13 09:07:13 [main] INFO  c.b.l.config.EnvConfig - Loading .env file for development profile: /Users/barisdalyan/Developer/web-projects/getir-bootcamp-final-case/library-management/../.env
2025-05-13 09:07:13 [main] INFO  c.b.l.config.EnvConfig - Successfully loaded 13 properties from .env file
2025-05-13 09:07:13 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-05-13 09:07:13 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-05-13 09:07:13 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-05-13 09:07:13 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.40]
2025-05-13 09:07:13 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-05-13 09:07:13 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 627 ms
2025-05-13 09:07:13 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-05-13 09:07:13 [main] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:librarydb user=SA
2025-05-13 09:07:13 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-05-13 09:07:13 [main] INFO  org.flywaydb.core.FlywayExecutor - Database: jdbc:h2:mem:librarydb (H2 2.3)
2025-05-13 09:07:13 [main] WARN  o.f.c.i.database.base.Database - Flyway upgrade recommended: H2 2.3.232 is newer than this version of Flyway and support has not been tested. The latest supported version of H2 is 2.2.224.
2025-05-13 09:07:13 [main] INFO  o.f.c.i.s.JdbcTableSchemaHistory - Schema history table "PUBLIC"."flyway_schema_history" does not exist yet
2025-05-13 09:07:13 [main] INFO  o.f.core.internal.command.DbValidate - Successfully validated 1 migration (execution time 00:00.005s)
2025-05-13 09:07:13 [main] INFO  o.f.c.i.s.JdbcTableSchemaHistory - Creating Schema History table "PUBLIC"."flyway_schema_history" ...
2025-05-13 09:07:13 [main] INFO  o.f.core.internal.command.DbMigrate - Current version of schema "PUBLIC": << Empty Schema >>
2025-05-13 09:07:13 [main] INFO  o.f.core.internal.command.DbMigrate - Migrating schema "PUBLIC" to version "1 - init schema"
2025-05-13 09:07:13 [main] INFO  o.f.core.internal.command.DbMigrate - Successfully applied 1 migration to schema "PUBLIC", now at version v1 (execution time 00:00.004s)
2025-05-13 09:07:13 [main] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-05-13 09:07:14 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-05-13 09:07:14 [main] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-05-13 09:07:14 [main] INFO  o.s.s.c.a.a.c.InitializeAuthenticationProviderBeanManagerConfigurer$InitializeAuthenticationProviderManagerConfigurer - Global AuthenticationManager configured with AuthenticationProvider bean with name authenticationProvider
2025-05-13 09:07:14 [main] WARN  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with an AuthenticationProvider bean. UserDetailsService beans will not be used by Spring Security for automatically configuring username/password login. Consider removing the AuthenticationProvider bean. Alternatively, consider using the UserDetailsService in a manually instantiated DaoAuthenticationProvider. If the current configuration is intentional, to turn off this warning, increase the logging level of 'org.springframework.security.config.annotation.authentication.configuration.InitializeUserDetailsBeanManagerConfigurer' to ERROR
2025-05-13 09:07:14 [main] INFO  c.b.l.s.i.BookAvailabilityServiceImpl - BookAvailabilityService initialized
2025-05-13 09:07:14 [main] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-05-13 09:07:15 [main] INFO  o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:librarydb'
2025-05-13 09:07:15 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-05-13 09:07:15 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-05-13 09:07:15 [main] INFO  c.b.l.LibraryManagementApplication - Started LibraryManagementApplication in 2.805 seconds (process running for 3.037)
2025-05-13 09:07:15 [main] INFO  c.b.l.bootstrap.DataInitializer - Starting data initialization...
2025-05-13 09:07:15 [main] INFO  c.b.l.bootstrap.DataInitializer - Admin user created: admin@library.com
2025-05-13 09:07:15 [main] INFO  c.b.l.bootstrap.DataInitializer - Created 3 sample patrons
2025-05-13 09:07:15 [main] INFO  c.b.l.bootstrap.DataInitializer - Created 5 sample books
2025-05-13 09:07:15 [main] INFO  c.b.l.bootstrap.DataInitializer - Created 5 sample borrow records
2025-05-13 09:07:15 [main] INFO  c.b.l.bootstrap.DataInitializer - Sample data created successfully
2025-05-13 09:07:18 [SpringApplicationShutdownHook] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-05-13 09:07:18 [tomcat-shutdown] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-05-13 09:07:18 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-05-13 09:07:18 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-05-13 09:07:18 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-05-13 09:07:41 [main] INFO  c.b.l.LibraryManagementApplication - Starting LibraryManagementApplication using Java 21 with PID 15158 (/Users/barisdalyan/Developer/web-projects/getir-bootcamp-final-case/library-management/target/classes started by barisdalyan in /Users/barisdalyan/Developer/web-projects/getir-bootcamp-final-case/library-management)
2025-05-13 09:07:41 [main] INFO  c.b.l.LibraryManagementApplication - The following 1 profile is active: "development"
2025-05-13 09:07:42 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-05-13 09:07:42 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 62 ms. Found 3 JPA repository interfaces.
2025-05-13 09:07:42 [main] INFO  c.b.l.config.EnvConfig - Loading .env file for development profile: /Users/barisdalyan/Developer/web-projects/getir-bootcamp-final-case/library-management/../.env
2025-05-13 09:07:42 [main] INFO  c.b.l.config.EnvConfig - Successfully loaded 13 properties from .env file
2025-05-13 09:07:42 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-05-13 09:07:42 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-05-13 09:07:42 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-05-13 09:07:42 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.40]
2025-05-13 09:07:42 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-05-13 09:07:42 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 640 ms
2025-05-13 09:07:42 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-05-13 09:07:42 [main] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:librarydb user=SA
2025-05-13 09:07:42 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-05-13 09:07:42 [main] INFO  org.flywaydb.core.FlywayExecutor - Database: jdbc:h2:mem:librarydb (H2 2.3)
2025-05-13 09:07:42 [main] WARN  o.f.c.i.database.base.Database - Flyway upgrade recommended: H2 2.3.232 is newer than this version of Flyway and support has not been tested. The latest supported version of H2 is 2.2.224.
2025-05-13 09:07:42 [main] INFO  o.f.c.i.s.JdbcTableSchemaHistory - Schema history table "PUBLIC"."flyway_schema_history" does not exist yet
2025-05-13 09:07:42 [main] INFO  o.f.core.internal.command.DbValidate - Successfully validated 1 migration (execution time 00:00.004s)
2025-05-13 09:07:42 [main] INFO  o.f.c.i.s.JdbcTableSchemaHistory - Creating Schema History table "PUBLIC"."flyway_schema_history" ...
2025-05-13 09:07:42 [main] INFO  o.f.core.internal.command.DbMigrate - Current version of schema "PUBLIC": << Empty Schema >>
2025-05-13 09:07:42 [main] INFO  o.f.core.internal.command.DbMigrate - Migrating schema "PUBLIC" to version "1 - init schema"
2025-05-13 09:07:42 [main] INFO  o.f.core.internal.command.DbMigrate - Successfully applied 1 migration to schema "PUBLIC", now at version v1 (execution time 00:00.004s)
2025-05-13 09:07:42 [main] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-05-13 09:07:43 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-05-13 09:07:43 [main] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-05-13 09:07:43 [main] INFO  o.s.s.c.a.a.c.InitializeAuthenticationProviderBeanManagerConfigurer$InitializeAuthenticationProviderManagerConfigurer - Global AuthenticationManager configured with AuthenticationProvider bean with name authenticationProvider
2025-05-13 09:07:43 [main] WARN  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with an AuthenticationProvider bean. UserDetailsService beans will not be used by Spring Security for automatically configuring username/password login. Consider removing the AuthenticationProvider bean. Alternatively, consider using the UserDetailsService in a manually instantiated DaoAuthenticationProvider. If the current configuration is intentional, to turn off this warning, increase the logging level of 'org.springframework.security.config.annotation.authentication.configuration.InitializeUserDetailsBeanManagerConfigurer' to ERROR
2025-05-13 09:07:44 [main] INFO  c.b.l.s.i.BookAvailabilityServiceImpl - BookAvailabilityService initialized
2025-05-13 09:07:44 [main] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-05-13 09:07:44 [main] INFO  o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:librarydb'
2025-05-13 09:07:44 [main] INFO  o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-05-13 09:07:44 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-05-13 09:07:44 [main] INFO  c.b.l.LibraryManagementApplication - Started LibraryManagementApplication in 2.798 seconds (process running for 3.049)
2025-05-13 09:07:44 [main] INFO  c.b.l.bootstrap.DataInitializer - Starting data initialization...
2025-05-13 09:07:44 [main] INFO  c.b.l.bootstrap.DataInitializer - Admin user created: admin@library.com
2025-05-13 09:07:44 [main] INFO  c.b.l.bootstrap.DataInitializer - Created 3 sample patrons
2025-05-13 09:07:44 [main] INFO  c.b.l.bootstrap.DataInitializer - Created 5 sample books
2025-05-13 09:07:44 [main] INFO  c.b.l.bootstrap.DataInitializer - Created 5 sample borrow records
2025-05-13 09:07:44 [main] INFO  c.b.l.bootstrap.DataInitializer - Sample data created successfully
2025-05-13 09:07:50 [http-nio-8080-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-05-13 09:07:50 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-05-13 09:07:50 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 1 ms
2025-05-13 09:07:50 [http-nio-8080-exec-1] INFO  c.b.l.controller.AuthController - Received login request for email: admin@library.com
2025-05-13 09:07:50 [http-nio-8080-exec-1] INFO  c.b.l.service.impl.AuthServiceImpl - User logged in successfully: admin@library.com
2025-05-13 09:08:26 [SpringApplicationShutdownHook] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-05-13 09:08:26 [tomcat-shutdown] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-05-13 09:08:26 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-05-13 09:08:26 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-05-13 09:08:26 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-05-13 09:17:00 [main] INFO  c.b.l.c.BorrowControllerIntegrationTest - Starting BorrowControllerIntegrationTest using Java 21 with PID 15635 (started by barisdalyan in /Users/barisdalyan/Developer/web-projects/getir-bootcamp-final-case/library-management)
2025-05-13 09:17:00 [main] INFO  c.b.l.c.BorrowControllerIntegrationTest - The following 1 profile is active: "test"
2025-05-13 09:17:01 [main] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name inMemoryUserDetailsManager
2025-05-13 09:17:01 [main] INFO  o.s.b.t.m.w.SpringBootMockServletContext - Initializing Spring TestDispatcherServlet ''
2025-05-13 09:17:01 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-05-13 09:17:01 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 1 ms
2025-05-13 09:17:01 [main] INFO  c.b.l.c.BorrowControllerIntegrationTest - Started BorrowControllerIntegrationTest in 0.805 seconds (process running for 3.836)
2025-05-13 09:17:01 [main] INFO  c.b.l.controller.BorrowController - Request to return book with ID: 1
2025-05-13 09:17:01 [main] INFO  c.b.l.controller.BorrowController - Request to get all borrowing records
2025-05-13 09:17:01 [main] INFO  c.b.l.controller.BorrowController - Request to get user's borrowing history
2025-05-13 09:17:01 [main] INFO  c.b.l.controller.BorrowController - Request to get user's active loans
2025-05-13 09:17:01 [main] INFO  c.b.l.controller.BorrowController - Request to get overdue books report as text
2025-05-13 09:17:01 [main] INFO  c.b.l.controller.BorrowController - Request to get all overdue records
2025-05-13 09:17:01 [main] INFO  c.b.l.controller.BorrowController - Request to borrow book with ID: 1
2025-05-13 09:17:01 [main] INFO  o.s.t.c.s.AnnotationConfigContextLoaderUtils - Could not detect default configuration classes for test class [com.barisdalyanemre.librarymanagement.controller.AuthControllerIntegrationTest]: AuthControllerIntegrationTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-05-13 09:17:01 [main] INFO  o.s.b.t.c.SpringBootTestContextBootstrapper - Found @SpringBootConfiguration com.barisdalyanemre.librarymanagement.LibraryManagementApplication for test class com.barisdalyanemre.librarymanagement.controller.AuthControllerIntegrationTest
2025-05-13 09:17:01 [main] INFO  c.b.l.c.AuthControllerIntegrationTest - Starting AuthControllerIntegrationTest using Java 21 with PID 15635 (started by barisdalyan in /Users/barisdalyan/Developer/web-projects/getir-bootcamp-final-case/library-management)
2025-05-13 09:17:01 [main] INFO  c.b.l.c.AuthControllerIntegrationTest - The following 1 profile is active: "development"
2025-05-13 09:17:01 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-05-13 09:17:01 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 20 ms. Found 3 JPA repository interfaces.
2025-05-13 09:17:01 [main] INFO  c.b.l.config.EnvConfig - Loading .env file for development profile: /Users/barisdalyan/Developer/web-projects/getir-bootcamp-final-case/library-management/../.env
2025-05-13 09:17:01 [main] INFO  c.b.l.config.EnvConfig - Successfully loaded 13 properties from .env file
2025-05-13 09:17:01 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-05-13 09:17:02 [main] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:librarydb user=SA
2025-05-13 09:17:02 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-05-13 09:17:02 [main] INFO  org.flywaydb.core.FlywayExecutor - Database: jdbc:h2:mem:librarydb (H2 2.3)
2025-05-13 09:17:02 [main] WARN  o.f.c.i.database.base.Database - Flyway upgrade recommended: H2 2.3.232 is newer than this version of Flyway and support has not been tested. The latest supported version of H2 is 2.2.224.
2025-05-13 09:17:02 [main] INFO  o.f.c.i.s.JdbcTableSchemaHistory - Schema history table "PUBLIC"."flyway_schema_history" does not exist yet
2025-05-13 09:17:02 [main] INFO  o.f.core.internal.command.DbValidate - Successfully validated 1 migration (execution time 00:00.007s)
2025-05-13 09:17:02 [main] INFO  o.f.c.i.s.JdbcTableSchemaHistory - Creating Schema History table "PUBLIC"."flyway_schema_history" ...
2025-05-13 09:17:02 [main] INFO  o.f.core.internal.command.DbMigrate - Current version of schema "PUBLIC": << Empty Schema >>
2025-05-13 09:17:02 [main] INFO  o.f.core.internal.command.DbMigrate - Migrating schema "PUBLIC" to version "1 - init schema"
2025-05-13 09:17:02 [main] INFO  o.f.core.internal.command.DbMigrate - Successfully applied 1 migration to schema "PUBLIC", now at version v1 (execution time 00:00.005s)
2025-05-13 09:17:02 [main] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-05-13 09:17:02 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-05-13 09:17:03 [main] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-05-13 09:17:04 [main] INFO  o.s.s.c.a.a.c.InitializeAuthenticationProviderBeanManagerConfigurer$InitializeAuthenticationProviderManagerConfigurer - Global AuthenticationManager configured with AuthenticationProvider bean with name authenticationProvider
2025-05-13 09:17:04 [main] WARN  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with an AuthenticationProvider bean. UserDetailsService beans will not be used by Spring Security for automatically configuring username/password login. Consider removing the AuthenticationProvider bean. Alternatively, consider using the UserDetailsService in a manually instantiated DaoAuthenticationProvider. If the current configuration is intentional, to turn off this warning, increase the logging level of 'org.springframework.security.config.annotation.authentication.configuration.InitializeUserDetailsBeanManagerConfigurer' to ERROR
2025-05-13 09:17:04 [main] INFO  c.b.l.s.i.BookAvailabilityServiceImpl - BookAvailabilityService initialized
2025-05-13 09:17:04 [main] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-05-13 09:17:04 [main] INFO  o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:librarydb'
2025-05-13 09:17:04 [main] INFO  o.s.b.t.m.w.SpringBootMockServletContext - Initializing Spring TestDispatcherServlet ''
2025-05-13 09:17:04 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2025-05-13 09:17:04 [main] INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2025-05-13 09:17:04 [main] INFO  c.b.l.c.AuthControllerIntegrationTest - Started AuthControllerIntegrationTest in 3.027 seconds (process running for 6.927)
2025-05-13 09:17:04 [main] INFO  c.b.l.bootstrap.DataInitializer - Starting data initialization...
2025-05-13 09:17:04 [main] INFO  c.b.l.bootstrap.DataInitializer - Admin user created: admin@library.com
2025-05-13 09:17:04 [main] INFO  c.b.l.bootstrap.DataInitializer - Created 3 sample patrons
2025-05-13 09:17:04 [main] INFO  c.b.l.bootstrap.DataInitializer - Created 5 sample books
2025-05-13 09:17:04 [main] INFO  c.b.l.bootstrap.DataInitializer - Created 5 sample borrow records
2025-05-13 09:17:04 [main] INFO  c.b.l.bootstrap.DataInitializer - Sample data created successfully
2025-05-13 09:17:04 [main] INFO  c.b.l.controller.AuthController - Received registration request for email: john.doe@example.com
2025-05-13 09:17:04 [main] INFO  c.b.l.service.impl.AuthServiceImpl - User registered successfully: john.doe@example.com
2025-05-13 09:17:04 [main] INFO  c.b.l.controller.AuthController - Received login request for email: john.doe@example.com
2025-05-13 09:17:05 [main] INFO  c.b.l.service.impl.AuthServiceImpl - User logged in successfully: john.doe@example.com
2025-05-13 09:17:05 [main] INFO  c.b.l.controller.AuthController - Received registration request for email: john.doe@example.com
2025-05-13 09:17:05 [main] INFO  c.b.l.service.impl.AuthServiceImpl - User registered successfully: john.doe@example.com
2025-05-13 09:17:05 [main] ERROR c.b.l.e.GlobalExceptionHandler - Access denied: Access Denied
2025-05-13 09:17:05 [main] INFO  c.b.l.controller.AuthController - Received registration request for email: john.doe@example.com
2025-05-13 09:17:05 [main] INFO  c.b.l.service.impl.AuthServiceImpl - User registered successfully: john.doe@example.com
2025-05-13 09:17:05 [main] INFO  c.b.l.controller.AuthController - Received registration request for email: john.doe@example.com
2025-05-13 09:17:05 [main] INFO  c.b.l.service.impl.AuthServiceImpl - User registered successfully: john.doe@example.com
2025-05-13 09:17:05 [main] INFO  c.b.l.controller.AuthController - Promoting user with ID: 12 to librarian role
2025-05-13 09:17:05 [main] INFO  c.b.l.service.impl.AuthServiceImpl - User with ID: 12 has been promoted to LIBRARIAN role
2025-05-13 09:17:05 [main] INFO  c.b.l.controller.AuthController - Received login request for email: nonexistent@example.com
2025-05-13 09:17:05 [main] ERROR c.b.l.e.GlobalExceptionHandler - Bad credentials: Bad credentials
2025-05-13 09:17:05 [main] INFO  o.s.t.c.s.AnnotationConfigContextLoaderUtils - Could not detect default configuration classes for test class [com.barisdalyanemre.librarymanagement.LibraryManagementApplicationTests]: LibraryManagementApplicationTests does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2025-05-13 09:17:05 [main] INFO  o.s.b.t.c.SpringBootTestContextBootstrapper - Found @SpringBootConfiguration com.barisdalyanemre.librarymanagement.LibraryManagementApplication for test class com.barisdalyanemre.librarymanagement.LibraryManagementApplicationTests
2025-05-13 09:17:05 [main] INFO  c.b.l.LibraryManagementApplicationTests - Starting LibraryManagementApplicationTests using Java 21 with PID 15635 (started by barisdalyan in /Users/barisdalyan/Developer/web-projects/getir-bootcamp-final-case/library-management)
2025-05-13 09:17:05 [main] INFO  c.b.l.LibraryManagementApplicationTests - The following 1 profile is active: "development"
2025-05-13 09:17:05 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-05-13 09:17:05 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 5 ms. Found 3 JPA repository interfaces.
2025-05-13 09:17:05 [main] INFO  c.b.l.config.EnvConfig - Loading .env file for development profile: /Users/barisdalyan/Developer/web-projects/getir-bootcamp-final-case/library-management/../.env
2025-05-13 09:17:05 [main] INFO  c.b.l.config.EnvConfig - Successfully loaded 13 properties from .env file
2025-05-13 09:17:05 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-2 - Starting...
2025-05-13 09:17:05 [main] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-2 - Added connection conn10: url=jdbc:h2:mem:librarydb user=SA
2025-05-13 09:17:05 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-2 - Start completed.
2025-05-13 09:17:05 [main] INFO  org.flywaydb.core.FlywayExecutor - Database: jdbc:h2:mem:librarydb (H2 2.3)
2025-05-13 09:17:05 [main] WARN  o.f.c.i.database.base.Database - Flyway upgrade recommended: H2 2.3.232 is newer than this version of Flyway and support has not been tested. The latest supported version of H2 is 2.2.224.
2025-05-13 09:17:05 [main] INFO  o.f.core.internal.command.DbValidate - Successfully validated 1 migration (execution time 00:00.001s)
2025-05-13 09:17:05 [main] INFO  o.f.core.internal.command.DbMigrate - Current version of schema "PUBLIC": 1
2025-05-13 09:17:05 [main] INFO  o.f.core.internal.command.DbMigrate - Schema "PUBLIC" is up to date. No migration necessary.
2025-05-13 09:17:05 [main] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-05-13 09:17:05 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-05-13 09:17:05 [main] INFO  o.s.s.c.a.a.c.InitializeAuthenticationProviderBeanManagerConfigurer$InitializeAuthenticationProviderManagerConfigurer - Global AuthenticationManager configured with AuthenticationProvider bean with name authenticationProvider
2025-05-13 09:17:05 [main] WARN  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with an AuthenticationProvider bean. UserDetailsService beans will not be used by Spring Security for automatically configuring username/password login. Consider removing the AuthenticationProvider bean. Alternatively, consider using the UserDetailsService in a manually instantiated DaoAuthenticationProvider. If the current configuration is intentional, to turn off this warning, increase the logging level of 'org.springframework.security.config.annotation.authentication.configuration.InitializeUserDetailsBeanManagerConfigurer' to ERROR
2025-05-13 09:17:05 [main] INFO  c.b.l.s.i.BookAvailabilityServiceImpl - BookAvailabilityService initialized
2025-05-13 09:17:05 [main] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-05-13 09:17:06 [main] INFO  o.s.b.a.h.H2ConsoleAutoConfiguration - H2 console available at '/h2-console'. Database available at 'jdbc:h2:mem:librarydb'
2025-05-13 09:17:06 [main] INFO  c.b.l.LibraryManagementApplicationTests - Started LibraryManagementApplicationTests in 0.327 seconds (process running for 8.498)
2025-05-13 09:17:06 [main] INFO  c.b.l.bootstrap.DataInitializer - Starting data initialization...
2025-05-13 09:17:06 [main] INFO  c.b.l.bootstrap.DataInitializer - Database already contains data, skipping initialization
2025-05-13 09:17:06 [main] INFO  c.b.l.service.impl.UserServiceImpl - User with ID: 1 has been updated
2025-05-13 09:17:06 [main] INFO  c.b.l.service.impl.UserServiceImpl - User with ID: 1 has been deleted
2025-05-13 09:17:06 [main] INFO  c.b.l.service.impl.BookServiceImpl - Updated availability for book ID: 1 to true
2025-05-13 09:17:06 [main] INFO  c.b.l.service.impl.BookServiceImpl - Updated book with ID: 1
2025-05-13 09:17:06 [main] INFO  c.b.l.service.impl.BookServiceImpl - Updated book with ID: 1
2025-05-13 09:17:06 [main] INFO  c.b.l.service.impl.BookServiceImpl - Deleted book with ID: 1
2025-05-13 09:17:06 [main] INFO  c.b.l.service.impl.BookServiceImpl - Created new book with ISBN: 9781234567897
2025-05-13 09:17:06 [main] INFO  c.b.l.service.impl.AuthServiceImpl - User registered successfully: test@example.com
2025-05-13 09:17:06 [main] INFO  c.b.l.service.impl.AuthServiceImpl - User with ID: 1 has been promoted to LIBRARIAN role
2025-05-13 09:17:06 [main] INFO  c.b.l.service.impl.AuthServiceImpl - User logged in successfully: test@example.com
2025-05-13 09:17:06 [main] INFO  c.b.l.s.i.BookAvailabilityServiceImpl - BookAvailabilityService initialized
2025-05-13 09:17:06 [main] INFO  c.b.l.s.i.BookAvailabilityServiceImpl - Publishing book availability event: BookAvailabilityEvent(bookId=1, title=Test Book, isbn=1234567890, available=true, timestamp=2025-05-13T09:17:06.197209)
2025-05-13 09:17:06 [main] INFO  c.b.l.s.i.BookAvailabilityServiceImpl - BookAvailabilityService initialized
2025-05-13 09:17:06 [main] INFO  c.b.l.s.i.BookAvailabilityServiceImpl - Publishing book availability event: BookAvailabilityEvent(bookId=1, title=Test Book, isbn=1234567890, available=true, timestamp=2025-05-13T09:17:06.200111)
2025-05-13 09:17:06 [main] INFO  c.b.l.s.i.BookAvailabilityServiceImpl - BookAvailabilityService initialized
2025-05-13 09:17:06 [main] INFO  c.b.l.s.i.BookAvailabilityServiceImpl - Publishing book availability event: BookAvailabilityEvent(bookId=1, title=Book 1, isbn=1111111111, available=true, timestamp=2025-05-13T09:17:06.200964)
2025-05-13 09:17:06 [main] INFO  c.b.l.s.i.BookAvailabilityServiceImpl - Publishing book availability event: BookAvailabilityEvent(bookId=2, title=Book 2, isbn=2222222222, available=false, timestamp=2025-05-13T09:17:06.200966)
2025-05-13 09:17:06 [main] INFO  c.b.l.service.impl.BorrowServiceImpl - Book Test Book returned by user@example.com
2025-05-13 09:17:06 [main] INFO  c.b.l.service.impl.BorrowServiceImpl - Processing 1 overdue books
2025-05-13 09:17:06 [main] INFO  c.b.l.service.impl.BorrowServiceImpl - Overdue book: 'Test Book' borrowed by Test User, due date was 2025-05-27T09:17:06.229296
2025-05-13 09:17:06 [main] INFO  c.b.l.service.impl.BorrowServiceImpl - Book Test Book returned by librarian@example.com
2025-05-13 09:17:06 [main] INFO  c.b.l.service.impl.BorrowServiceImpl - User user@example.com borrowed book Test Book
2025-05-13 09:17:06 [main] ERROR c.b.l.e.GlobalExceptionHandler - Message not readable: null
2025-05-13 09:17:06 [main] ERROR c.b.l.e.GlobalExceptionHandler - Conflict: Book is already borrowed
2025-05-13 09:17:06 [main] ERROR c.b.l.e.GlobalExceptionHandler - Resource not found: Book not found with id: 999
2025-05-13 09:17:06 [main] ERROR c.b.l.e.GlobalExceptionHandler - Validation error: null
2025-05-13 09:17:06 [main] ERROR c.b.l.e.GlobalExceptionHandler - Type mismatch: null
2025-05-13 09:17:06 [main] ERROR c.b.l.e.GlobalExceptionHandler - Bad request: Invalid request parameters
2025-05-13 09:17:06 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-05-13 09:17:06 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-05-13 09:17:06 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-05-13 09:17:06 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-05-13 09:17:06 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-2 - Shutdown initiated...
2025-05-13 09:17:06 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-2 - Shutdown completed.
